{% extends "base.html" %}

{% block content %}
<div class="container">
	<form action="{% url 'event-list' %}" method="GET">
		<div class="input-group my-3">
			<input type="text" class="form-control" placeholder="Search here.." name='q' value='{{request.GET.q}}'>
			<div class="input-group-append">
				<button class="btn btn-outline-secondary" type="submit" id="button-addon2">Search</button>
			</div>
		</div>
	</form>
</div>
{% if upcoming_events|length == 1 %}
	<div class="container" style="display: None;" id="query_count"><h4><span>{{query_len}}</span> result</h4></div>
{% else %}
<div class="container" style="display: None;" id="query_count"><h4><span>{{query_len}}</span> results</h4></div>
{% endif %}
<div class="row mt-5 mx-5">
	{% for event in upcoming_events %}
	<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 mb-5">
		<div class="card text-center" style="width: 18rem;">
			<div class="card-body">
				<h5 class="card-title">{{event.title}}</h5>
				<p class="card-text">{{event.description}}<br>When: {{event.date}} {{event.time}}</p>
				<a href="{% url 'event-detail' event.id %}" class="btn btn-primary">View Event</a>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
<div class="container" id="paginator">

	<nav aria-label="Page navigation example">

		<ul class="pagination">
			<p>Pages:&nbsp &nbsp</p>
			{% for page in number_of_pages %}

			<form action="{% url 'event-list' %}" method="GET">
				
				<input type="hidden" class="form-control" name="page_number" value={{page}}>
				<input type="hidden" class="form-control" name="q" value='{{request.GET.q}}'>
				
				
				<li class="page-item mx-1" ><button class="btn text-light" type='submit' id="{{page}}">{{page}}</button></li>
				
			</form>


			
			{% endfor %}
			
			
			
		</ul>
	</nav>

</div>

<script>
var url_string = window.location.href
var url = new URL(url_string);
var c = url.searchParams.get("q");
if (c) {
	document.getElementById("query_count").style.display = 'block';
}
var page_num = url.searchParams.get("page_number")
if (page_num) {
	page_num = page_num.toString()
	document.getElementById(page_num).style.backgroundColor = '#ee0979';
}
else {
	document.getElementById("1").style.backgroundColor = '#ee0979';
}




</script>
{% endblock content %}